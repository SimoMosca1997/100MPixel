<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>100M Pixel Grid</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      overflow: hidden;
    }

    canvas {
      display: block;
      background-color: #f0f0f0;
    }

    #modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      display: none;
      flex-direction: column;
      gap: 10px;
      z-index: 1000;
    }

    #modal input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    #modal button {
      padding: 10px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    #modal button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <div id="modal">
    <input type="text" id="imageUrl" placeholder="Enter image URL">
    <input type="text" id="linkUrl" placeholder="Enter link URL (optional)">
    <button id="saveButton">Save</button>
  </div>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    const modal = document.getElementById("modal");
    const imageUrlInput = document.getElementById("imageUrl");
    const linkUrlInput = document.getElementById("linkUrl");
    const saveButton = document.getElementById("saveButton");

    let gridWidth, gridHeight;
    let pixelSize = 50; // Size of each pixel
    let pixelData = JSON.parse(localStorage.getItem("pixelData")) || {}; // Load saved data
    let selectedPixel = null;

    // Resize canvas to fit screen
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      gridWidth = Math.ceil(canvas.width / pixelSize);
      gridHeight = Math.ceil(canvas.height / pixelSize);
      drawGrid();
    }

    window.addEventListener("resize", resizeCanvas);

    // Draw the grid
    function drawGrid() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      for (let x = 0; x < gridWidth; x++) {
        for (let y = 0; y < gridHeight; y++) {
          const key = `${x},${y}`;
          ctx.strokeStyle = "#ddd";
          ctx.strokeRect(x * pixelSize, y * pixelSize, pixelSize, pixelSize);

          // Draw saved image if exists
          if (pixelData[key]) {
            const img = new Image();
            img.src = pixelData[key].image;
            img.onload = () => {
              ctx.drawImage(img, x * pixelSize, y * pixelSize, pixelSize, pixelSize);
            };
          }
        }
      }
    }

    // Open modal to edit pixel
    function openModal(x, y) {
      selectedPixel = { x, y };
      modal.style.display = "flex";
      imageUrlInput.value = pixelData[`${x},${y}`]?.image || "";
      linkUrlInput.value = pixelData[`${x},${y}`]?.link || "";
    }

    // Save pixel data
    function savePixelData() {
      const { x, y } = selectedPixel;
      const imageUrl = imageUrlInput.value.trim();
      const linkUrl = linkUrlInput.value.trim();

      if (!imageUrl) {
        alert("Image URL is required!");
        return;
      }

      pixelData[`${x},${y}`] = { image: imageUrl, link: linkUrl };
      localStorage.setItem("pixelData", JSON.stringify(pixelData));

      modal.style.display = "none";
      drawGrid();
    }

    // Handle click on canvas
    canvas.addEventListener("click", (event) => {
      const x = Math.floor(event.offsetX / pixelSize);
      const y = Math.floor(event.offsetY / pixelSize);

      if (pixelData[`${x},${y}`]?.link) {
        window.open(pixelData[`${x},${y}`].link, "_blank");
      } else {
        openModal(x, y);
      }
    });

    saveButton.addEventListener("click", savePixelData);

    // Initial setup
    resizeCanvas();
  </script>
</body>
</html>
